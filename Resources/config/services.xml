<?xml version="1.0" encoding="UTF-8" ?>
<container xmlns="http://symfony.com/schema/dic/services"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://symfony.com/schema/dic/services
        http://symfony.com/schema/dic/services/services-1.0.xsd">

    <parameters>
        <parameter key="adauth.class">AdAuth\AdAuth</parameter>
        <parameter key="adauth.transport.tls.class">AdAuthBundle\Stream\TlsStream</parameter>
        <parameter key="adauth.transport.unencrypted.class">AdAuth\Stream\UnencryptedStream</parameter>
    </parameters>

    <services>
        <service id="adauth.transport.tls" class="%adauth.transport.tls.class%" public="false">
            <argument /> <!-- peer name -->
            <argument /> <!-- serialnumber -->
            <argument /> <!-- CA file -->
        </service>

        <service id="adauth.transport.unencrypted" class="%adauth.transport.unencrypted.class%" public="false" />

        <service id="adauth" class="%adauth.class%">
            <argument /> <!-- host -->
            <argument /> <!-- port -->
            <argument /> <!-- transport -->
            <argument /> <!-- serializer -->
        </service>

        <!-- commands -->
        <service id="adauth.request_command" class="AdAuth\Command\AuthRequestCommand">
            <tag name="console.command" command="adauth:request:auth" />
        </service>

        <service id="adauth.ping_command" class="AdAuth\Command\PingRequestCommand">
            <tag name="console.command" command="adauth:request:ping" />
        </service>
    </services>
</container>